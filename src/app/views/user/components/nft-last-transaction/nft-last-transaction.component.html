<div class="jx-m-1 jx-d-block metadata-wrapper" style="overflow-y: auto; overflow-x: hidden;">
    <ng-container *ngIf="!productExist; else itEsixts">
        <div class="-tab-wrapper jx-p-relative" style="max-width: 700px;">
            <!-- <div class="-tab-nav">
                <ng-container *ngIf="viewMode == 'tab1' || viewMode == 'tab2'">
                    <ul class="-tab-group jx-d-flex jx-gap-2 justify-content-between align-items-center jx-fs-14 jx-mb-0">
                        <li class="-tab-trigger" [class.active]="viewMode == 'tab1'" rel="tab1" (click)="viewMode ='tab1';">NFT Metadata
                        </li>
                        <li *ngIf="this.uploadedImageUrl" class="-tab-trigger" [class.active]="viewMode == 'tab2'" rel="tab2" (click)="viewMode ='tab2'">Metadata
                        </li>
                    </ul>
                </ng-container>
            </div> -->
            <div class="-tab-body-group">
                <!-- Busy -->
                <span class="form-overlay" *ngIf="busy"><i class="la la-refresh icon-spin cubed-logo"></i></span>
                <div id="tab1" class="-tab-body" [class.jx-d-block]="viewMode == 'tab1'">
                    <div class="tab-wrapper jx-p-relative">

                        <div class="tab-wrapper jx-p-relative  jx-py-1 jx-px-2">
                            <h3 class="menu-title">Luxury NFT Details</h3>
        
                            <div class="sidebar-thumbnail animated fadeInUp jx-d-flex align-items-center justify-content-center">
                                <img id="prodImage" [src]="$any(lastTransaction)?.product_image" class="product-image" 
                                  onerror="this.src='assets/images/users/11-255.jpg'" alt="">
                                <img class="float-it" src="assets/images/icons/camera.png" alt="">
                              </div>
        
                            <div class="user-data jx-py-2">
                                <div class="data-row">
                                    <span class="key">Product ID (PID):</span>
                                    <span class="value">{{PID}}</span>
                                </div>
                                <div class="data-row">
                                    <span class="key">Product Name:</span>
                                    <span class="value">{{$any(lastTransaction)?.product_name}}</span>
                                </div>
                                <ng-container *ngFor="let txn of $any(lastTransaction)?.attributes; let i=index">
                                    <div class="data-row"  *ngIf="txn?.trait_type != 'Owner PK' && txn?.trait_type != 'Product Serial No'">
                                        <span class="key">{{txn?.trait_type}}:</span>
                                        <span class="value">{{txn?.value}}</span>
                                    </div>
                                </ng-container>
                                
                                <div class="data-row">
                                    <span class="key">Product Description:</span>
                                    <span class="value">{{$any(lastTransaction)?.description}}</span>
                                </div>
                            </div>
        
                            <div class="prev-sign-btns jx-d-flex justify-content-between">
                                <!-- <button class="prev" (click)="viewMode = 'tab2'"> Previous </button> -->
                                <span></span>
                                <button class="sign" (click)="viewMode = 'tab2'"> Proceed to Update Image </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="tab2" class="-tab-body" [class.jx-d-block]="viewMode == 'tab2'">
                    <div class="tab-wrapper jx-p-relative jx-py-1 jx-px-2">

                        <h3 class="menu-title">Update Image</h3>

                        <div class="w-per-100" *ngIf="viewMode == 'tab2'">
                            <ng-container *ngIf="!capturedImage; else resultingImage">
                                <nft-camera (capturedImage)="captureImage($event)"></nft-camera>
                            </ng-container>
                            <ng-template #resultingImage>
                                <div class="jx-p-relative">
                                    <img [src]="capturedImage" >
                                    <div style="margin-bottom: 5px;"></div>
                                    <button class="btn btn-success jx-p-absolute capture-btn" (click)="retakeShot();">Retake Shot</button>
                                </div>
                            </ng-template>
                        </div>

                        <div class="prev-sign-btns jx-d-flex justify-content-between">
                            <button class="prev" (click)="viewMode = 'tab1'"> Previous </button>
                            <button class="sign" (click)="viewMode = 'tab3'"> Upload Image & Proceed </button>
                        </div>
                    </div>
                </div>
                <div id="tab3" class="-tab-body" [class.jx-d-block]="viewMode == 'tab3'">
                    <div class="tab-wrapper jx-p-relative  jx-py-1 jx-px-2">
                        <h3 class="menu-title">Preview</h3>
    
                        <!-- <div class="sidebar-thumbnail animated fadeInUp jx-d-flex align-items-center justify-content-center">
                            <img id="prodImage" [src]="lastTransaction?.product_image" class="product-image" 
                              onerror="this.src='assets/images/users/11-255.jpg'" alt="">
                            <img class="float-it" src="assets/images/icons/camera.png" alt="">
                          </div> -->
    
                        <!-- <div class="user-data jx-py-2">
                                <div class="data-row">
                                    <span class="key">Product ID (PID):</span>
                                    <span class="value">{{lastTransaction?.pid}}</span>
                                </div>
                                <div class="data-row">
                                    <span class="key">Product Label:</span>
                                    <span class="value">{{lastTransaction?.product_label}}</span>
                                </div>
                                <div class="data-row">
                                    <span class="key">Product Name:</span>
                                    <span class="value">{{lastTransaction?.product_name}}</span>
                                </div>
                                <div class="data-row">
                                    <span class="key">Product Color:</span>
                                    <span class="value">{{lastTransaction?.product_color}}</span>
                                </div>
                                <div class="data-row">
                                    <span class="key">Product Brand:</span>
                                    <span class="value">{{lastTransaction?.product_brand}}</span>
                                </div>
                                <div class="data-row">
                                    <span class="key">Product Description:</span>
                                    <span class="value">{{lastTransaction?.description}}</span>
                                </div>
                            </div>
                         -->
                        <div class="prev-sign-btns jx-d-flex justify-content-between">
                            <button class="prev" (click)="viewMode = 'tab2'"> Previous </button>
                            <button class="sign"> Sign & Generate QR Code </button>
                            <!-- <button class="sign" (click)="submit3()"> Sign & Generate QR Code </button> -->
                        </div>
                    </div>
                </div>  
                <div id="tab4" class="-tab-body" [class.jx-d-block]="viewMode == 'tab4'">
                    <div class="tab-wrapper jx-py-1 jx-px-2 jx-d-flex justify-content-center align-items-center">
                        <div class="prev-sign-btns jx-d-grid jx-py-4">
                            <span class="jx-fs-24 jx-py-1" style="text-align: center;line-height: 30px;">LuxuryNFT Successfully <br> Saved</span>
                            <button class="sign" (click)="requestToOpenNFTCreate('QR Code')"> Scan Another Product </button>
                        </div>
                    </div>
                </div>
            </div>
        
        </div>
    </ng-container>
    <ng-template #itEsixts>
        <div class="exists jx-d-flex justify-content-center jx-mt-2">
            <h2 style="margin:0">LuxuryNFT Already 
                <span style="color: white; background: #f61d3f; padding: 4px 10px;"> Exists</span> 
            </h2>
        </div>
    </ng-template>
</div>
